@page
@model VaskEnTidWeb.Pages.BookingsModel
@{
    ViewData["Title"] = "Booking n shit";
}
<link rel="stylesheet" href="~/css/booking.css" asp-append-version="true" />
<h1>@ViewData["Title"]</h1>

<div class="card">
    <form method="post" asp-page-handler="Create">
        <input type="text" name="DateAndTime" asp-for="DateAndTime" value="@DateTime.Now" required />
        <input type="int" name="DomicileID" asp-for="DomicileID" required />
        <label for="Machine Selection"></label>
        <select id="MachineIDs" name="MachineIDs" required>
            <option value="1">Washer 1</option> 
            <option value="2">Washer 2</option> 
            <option value="3">Washer 3</option>
            <option value="4">Dryer 1</option>
            <option value="5">Dryer 2</option>
            <option value="6">Roller 1</option>
        </select>
        <input type="submit" value="Create"/>
    </form>
</div>

@foreach (VaskEnTidLib.Model.Booking booking in Model.Bookings)
{
    <div class="card">
        <h1>
            Booking Id: @booking.BookingID
        </h1>

        <p>
            Domicile Id: @booking.DomicileID
        </p>
        <p>
            Machine Ids
            @foreach (var i in booking.MachineIDs)
            {
               <text>@i </text>
            }
        </p> 
        <p>
            Booking Tidspunkt: @booking.DateAndTime
        </p>
        <p>
            Duration: @booking.Duration
        </p>
        <p>
            TotalCost: @booking.TotalCost
        </p>
        <div>
            <!--This button runs the OnPostShow method and defines a temporary booking id we can send over -->
            <form method="post" asp-page-handler="Show">
                <!--to the next page -->
                <input type="hidden" name="TempBookingID" asp-for="TempBookingID" value="@booking.BookingID" />
                <input type="submit" value="Open Booking" />
            </form>
        </div>
    </div>
}

